<!doctype html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Raspberry Pi</title>
	<link rel="stylesheet" type="text/css" href="/styles/styles.css">
	<link rel="shortcut icon" href="/images/favicon.png" type="image/png">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
	<script>window.chartColors = {
		red: 'rgb(255, 69, 0)',
		orange: 'rgb(255, 159, 64)',
		yellow: 'rgb(255, 205, 86)',
		green: 'rgb(34, 139, 34)',
		blue: 'rgb(30,144, 255)',
		purple: 'rgb(153, 102, 255)',
		grey: 'rgb(201, 203, 207)'
	};</script>
	<script src="/js/clientConfig.js"></script>
</head>

<body>
	<div class="wrapper">
			<nav class="main-nav">
				<ul>
					<li>
						<a id="nav-home" onclick="navigateTo('/');">Messung</a>
					</li>
					<li>
						<a id="nav-documentation" href="#" onclick="changeView(2)">Dokumentation</a>
					</li>
					<li>
						<a id="nav-info" href="#" onclick="changeView(3)">Info</a>
					</li>
					<li>
						<a id="nav-contact" href="#" onclick="changeView(4)">Kontakt</a>
					</li>
					<li>
						<a id="nav-demo" onclick="navigateTo('/demo');">Demo</a>
					</li>
				</ul>
			</nav>
		<div id="content">
			<div id="value-overview" class="hide">
				<div id="trend-area"></div>
				<div id="actValOutside"></div>
				<div id="actValInside"></div>
				<div id="actValProcessor"></div>
				<div id="actValTimeStamp"></div>
			</div>
			<section class="top-container">
				<div class="trend">
					<canvas id="canvas" width="375" height="375"></canvas>
				</div>
				<div class="change-timerange">
					<a onclick="navigateTo(siteURLGetDay);">1 Tag</a>
					<a onclick="navigateTo(siteURLGetWeek);">1 Woche</a>
					<a onclick="navigateTo(siteURLGetMonth);">1 Monat</a>
				</div>
				<fieldset class="box-a">
					<legend>Auswahl manueller Zeitbereich</legend>
					<form action="/pi" method="POST">
						<br>
						<label for="_sDate" style="padding-right:4px">Start- Datum:</label>
						<input class="inputfield" type="date" name="sdate" id="_sDate">
						<br>
						<br>
						<label for="_eDate">Ende- Datum:</label>
						<input class="inputfield" type="date" name="edate" id="_eDate">
						<input class="timerange-buttons" type="submit" value="Ausf&uuml;hren" id="submit">
					</form>
				</fieldset>
				<fieldset class="box-b">
					<legend>Auswahl vordefinierte Zeitbereiche</legend>
					<form action="/pi/2" method="POST">
						<br>
						<label for="selTimeRange">Zeitbereiche:</label>
						<select name="Zeitbereiche" id="selTimeRange">
						<option value="1">Heute</option>
						<option value="2">2 Tage</option>
						<option value="3">3 Tage</option>
						<option value="5">5 Tage</option>
						<option value="10">10 Tage</option>
						<option value="14">14 Tage</option>
						<option value="31">1 Monat</option>
						<option value="183">6 Monate</option>
						<option value="365">1 Jahr</option>
						<option value="730">2 Jahre</option>
						</select>
						<input type="submit" value="Ausf&uuml;hren" class="timerange-buttons">
					</form>
				</fieldset>
			</section>
			<br>
			<br>
			<section class="info">
				<fieldset>
					<legend>Statistik des aktuellen Zeitbereichs</legend>
					<div class="statistic-table">
						<table>
							<tr>
								<th>Messstelle</th>
								<th>Einheit</th>
								<th>Min</th>
								<th>Max</th>
								<th>Durchschnitt</th>
								<th>Anzahl Messwerte</th>
							</tr>
								<tr>
								<td>Aussen</th>
								<td>&deg;C</td>	
								<td>_min1</th>
								<td>_max1</th>
								<td>_avg1</th>
								<td>_num1</th>
							</tr>
							<tr>
								<td>Innen</th>
								<td>&deg;C</td>	
								<td>_min2</th>
								<td>_max2</th>
								<td>_avg2</th>
								<td>_num2</th>
							</tr>
							<tr>
								<td>PI Prozessor</th>
								<td>&deg;C</td>	
								<td>_min3</th>
								<td>_max3</th>
								<td>_avg3</th>
								<td>_num3</th>
							</tr>
						</table>
					</div>
				</fieldset>
				<br>
				<br>
				<fieldset>
					<legend>Aktuelle Speicherauslastung Raspberry PI</legend>
						<div class= "bottom-container">
							<br>
							<div class="hdd-trend">
								<canvas class="hdd-canvas" id="info-hdd-canvas"></canvas>
							</div>
							<br>
							<br>
							<div class="ram-trend">
								<canvas class="ram-canvas" id="info-ram-canvas"></canvas>
							</div>
						</div>
				</fieldset>
			</section>
		</div>
		<footer>
			<p>2018 WeGo67 - Raspberry Pi mit Sensor DS18B20</p>
		</footer>
	</div>
	<script>
		var cHeight = window.innerHeight;
		var cWidth = window.innerWidth;
		console.log(cHeight, cWidth);
		var mobile;
		var fontSizeLegend;
		var fontColorLegend;
		var titleFontSize;
		var bodyFontSize;
		var nameInsideTemp, nameOutsideTemp, nameProcessorTemp;
		
		if(cWidth<= 600) {
			mobile= true;
			fontSizeLegend= 22;
			bodyFontSize= 20;
			titleFontSize= 20;
			fontColorLegend= 'rgb(250, 249, 249)';
			nameInsideTemp =   'Innen',
			nameOutsideTemp=   'Aussen',
			nameProcessorTemp= 'CPU'

		}
		else {
			mobile= false;
			fontSizeLegend= 15;
			bodyFontSize= 12;
			titleFontSize= 12;
			fontColorLegend= '#666';
			nameInsideTemp =   'Innen',
			nameOutsideTemp=   'Aussen',
			nameProcessorTemp= 'CPU'
		}
		
		var config = {
			type: 'line',
			data: {
				labels: [_xvalues],
				datasets: [{
					label: nameOutsideTemp,
					backgroundColor: window.chartColors.blue,
					borderColor: window.chartColors.blue,
					data: [_yvalues1],
					fill: false,
					pointRadius: 0					
				}, {
					label: nameInsideTemp,
					fill: false,
					backgroundColor: window.chartColors.red,
					borderColor: window.chartColors.red,
					data: [_yvalues2],
					pointRadius: 0					
				}, {
					label: nameProcessorTemp,
					fill: false,
					backgroundColor: window.chartColors.orange,
					borderColor: window.chartColors.orange,
					data: [_yvalues3],
					pointRadius: 0
				}]
			},
			options: {
				legend: {
            		display: true,
            		labels: {
                		fontSize: fontSizeLegend,
						fontColor: fontColorLegend
            		},
					fullWidth: mobile
					
        		},
				responsive: true,
				maintainAspectRatio: false,
				aspectRatio: 1.0,
				title: {
					display: true,
					text: ''
				},
				tooltips: {
					mode: 'index',
					intersect: false,
					bodyFontSize: bodyFontSize,
					titleFontSize: titleFontSize
				},
				hover: {
					mode: 'nearest',
					intersect: true
				},
				scales: {
					xAxes: [{
						display: !mobile,
						scaleLabel: {
							display: true,
							labelString: '>>>> [ t ] >>>>'
						}
					}],
					yAxes: [{
						display: !mobile,
						scaleLabel: {
							display: true,
							labelString: '>>>> [ \u00b0C ] >>>>'
						}
					}]
				}
			}
		};

/* 		window.onload = function() {
			var ctx = document.getElementById('canvas').getContext('2d');
			window.myLine = new Chart(ctx, config);
		}; */
	</script>
	<script>
        //var color = Chart.helpers.color;
		var horizontalBarChartData1 = {
			labels: ['HDD'],
			datasets: [{
				label: 'Verwendet',
				backgroundColor: [
					window.chartColors.blue
					],
				data: [
				_SysInfo1
				]
			},
			{
				label: 'Frei',
				backgroundColor: [
					window.chartColors.green
					],
				data: [
				_SysInfo2
				]
			}]
		};

var horizontalBarChartData2 = {
			labels: ['RAM'],
			datasets: [{
				label: 'Verwendet',
				backgroundColor: [
					window.chartColors.blue
					],
				data: [
				_SysInfo3
				]
			},
			{
				label: 'Frei',
				backgroundColor: [
					window.chartColors.green
					],
				data: [
				_SysInfo4
				]
			}]
		};

		window.onload = function() {
			var ctx1 = document.getElementById('canvas').getContext('2d');
			window.myLine = new Chart(ctx1, config);
			var ctx2 = document.getElementById('info-hdd-canvas').getContext('2d');
			window.myHorizontalBar1 = new Chart(ctx2, {
				type: 'horizontalBar',
				data: horizontalBarChartData1,
				options: {
					// Elements options apply to all of the options unless overridden in a dataset
					// In this case, we are setting the border of each horizontal bar to be 2px wide
					elements: {
						rectangle: {
							borderWidth: 2,
						}
					},
					responsive: false,
					barPercentage: 0.5,
					legend: {
						position: 'top',
					},
					title: {
						display: true,
						text: '16 GB SD Card',
						position: 'bottom'
					},
					scales: {
 						xAxes: [
/* 							{
									ticks: {
										min: 0,
									}
								}, */
								{
									stacked: true	
							}], 
						yAxes: [
/* 							{
							ticks: {
										min: 0,
									}
								}, */
								{
									stacked: true	
							}]
						}
				}
			});
			var ctx3 = document.getElementById('info-ram-canvas').getContext('2d');
			window.myHorizontalBar2 = new Chart(ctx3, {
				type: 'horizontalBar',
				data: horizontalBarChartData2,
				options: {
					// Elements options apply to all of the options unless overridden in a dataset
					// In this case, we are setting the border of each horizontal bar to be 2px wide
					elements: {
						rectangle: {
							borderWidth: 2,
						}
					},
					responsive: false,
					barPercentage: 0.5,
					legend: {
						position: 'top',
					},
					title: {
						display: true,
						text: '1 GB RAM',
						position: 'bottom'
					},
					scales: {
						xAxes: [{
								stacked: true,	
							}],
						yAxes: [{
								stacked: true,	
							}]
						}
				}
			});

		};
    </script>
	<script src="/js/nav.js"></script>
	<script src="/js/updActValues.js"></script>
</body>

</html>

